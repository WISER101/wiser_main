<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Courses — Admin — Wiser</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/app.css">
  <link rel="stylesheet" href="../css/admin.css">
  <script>(function(){var t=localStorage.getItem('wiser_theme');if(t==='dark')document.documentElement.setAttribute('data-theme','dark')})()</script>
</head>
<body>
  <div class="app-layout">
    <!-- Admin Sidebar -->
    <aside class="sidebar admin-sidebar">
      <div class="sidebar-logo">
        <a href="dashboard.html">
          <img src="../assets/logo-Light-Theme.png" alt="Wiser" class="logo-icon logo-light"><img src="../assets/Logo-Dark-Theme.png" alt="Wiser" class="logo-icon logo-dark">
        </a>
        <span class="admin-badge">Admin</span>
      </div>
      <nav class="sidebar-nav">
        <div class="sidebar-nav-label">Overview</div>
        <a href="dashboard.html" class="sidebar-link">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
          Dashboard
        </a>
        <a href="users.html" class="sidebar-link">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
          Users
        </a>
        <div class="sidebar-nav-label">Content</div>
        <a href="courses.html" class="sidebar-link active">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
          Courses
        </a>
        <a href="reports.html" class="sidebar-link">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
          Reports
        </a>
        <div class="sidebar-nav-label">Finance</div>
        <a href="revenue.html" class="sidebar-link">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
          Revenue
        </a>
        <div class="sidebar-nav-label">System</div>
        <a href="settings.html" class="sidebar-link">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
          Settings
        </a>
      </nav>
      <div class="sidebar-user">
        <div class="avatar avatar-sm" style="background: linear-gradient(135deg, #DC2626, #5ab82e)">A</div>
        <div class="sidebar-user-info">
          <span class="sidebar-user-name">Admin</span>
          <span class="sidebar-user-role">Super Admin</span>
        </div>
      </div>
    </aside>

    <div class="sidebar-overlay" onclick="document.body.classList.remove('sidebar-open')"></div>

    <main class="main-content">
      <header class="top-header">
        <button class="sidebar-toggle" onclick="document.body.classList.toggle('sidebar-open')">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
        </button>
        <h2 class="page-title">Course Management</h2>
        <div style="flex:1"></div>
        <div class="header-actions">
          <button class="theme-toggle" onclick="ThemeManager.toggle()" aria-label="Toggle dark mode" style="background:none;border:none;cursor:pointer;padding:6px;"><svg class="icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg><svg class="icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button>
          <button class="btn btn-primary btn-sm" onclick="showModal('addCourseModal')">+ Add Course</button>
        </div>
      </header>

      <div class="page-content">
      <!-- Course Stats -->
      <div class="admin-stats-grid">
        <div class="admin-stat-card">
          <div class="admin-stat-icon" style="background:rgba(61,139,28,0.1);color:#3d8b1c;"><span class="wi wi-book"></span></div>
          <div class="admin-stat-value" data-count="1284">0</div>
          <div class="admin-stat-label">Total Courses</div>
        </div>
        <div class="admin-stat-card">
          <div class="admin-stat-icon" style="background:rgba(90,184,46,0.1);color:#5ab82e;"><span class="wi wi-check"></span></div>
          <div class="admin-stat-value" data-count="1041">0</div>
          <div class="admin-stat-label">Published</div>
        </div>
        <div class="admin-stat-card">
          <div class="admin-stat-icon" style="background:rgba(159,232,112,0.1);color:#9fe870;"><span class="wi wi-bell"></span></div>
          <div class="admin-stat-value" data-count="87">0</div>
          <div class="admin-stat-label">Pending Review</div>
        </div>
        <div class="admin-stat-card">
          <div class="admin-stat-icon" style="background:rgba(239,68,68,0.1);color:#EF4444;"><span class="wi wi-edit"></span></div>
          <div class="admin-stat-value" data-count="156">0</div>
          <div class="admin-stat-label">Draft</div>
        </div>
      </div>

      <!-- Toolbar -->
      <div class="admin-toolbar">
        <div class="admin-search-box">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <input type="text" placeholder="Search courses..." oninput="filterCourses()">
        </div>
        <div class="admin-filters">
          <select id="categoryFilter" onchange="filterCourses()">
            <option value="">All Categories</option>
            <option value="development">Development</option>
            <option value="design">Design</option>
            <option value="business">Business</option>
            <option value="data-science">Data Science</option>
            <option value="marketing">Marketing</option>
          </select>
          <select id="statusFilter" onchange="filterCourses()">
            <option value="">All Status</option>
            <option value="published">Published</option>
            <option value="pending">Pending</option>
            <option value="draft">Draft</option>
            <option value="suspended">Suspended</option>
          </select>
        </div>
      </div>

      <!-- Course Table -->
      <div class="card">
        <div class="admin-table-wrap">
        <table class="data-table" id="courseTable">
          <thead>
            <tr>
              <th><input type="checkbox" onclick="toggleSelectAll(this)"></th>
              <th>Course</th>
              <th>Instructor</th>
              <th>Category</th>
              <th>Students</th>
              <th>Rating</th>
              <th>Revenue</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="courseTableBody"></tbody>
        </table>
        </div>
      </div>

      <!-- Pagination -->
      <div class="admin-pagination">
        <span class="admin-pagination-info">Showing 1-10 of 87 courses</span>
        <div class="admin-pagination-btns">
          <button class="admin-page-btn" disabled>← Prev</button>
          <button class="admin-page-btn active">1</button>
          <button class="admin-page-btn">2</button>
          <button class="admin-page-btn">3</button>
          <button class="admin-page-btn">...</button>
          <button class="admin-page-btn">9</button>
          <button class="admin-page-btn">Next →</button>
        </div>
      </div>
      </div>
    </main>
  </div>

  <!-- Add Course Modal -->
  <div class="admin-modal-overlay" id="addCourseModal">
    <div class="admin-modal" style="max-width:540px;">
      <div class="admin-modal-header">
        <h3>Add New Course</h3>
        <button class="admin-modal-close" onclick="hideModal('addCourseModal')">✕</button>
      </div>
      <div class="admin-modal-body">
        <div class="admin-form-group">
          <label>Course Title</label>
          <input type="text" id="newCourseTitle" placeholder="e.g. Advanced React Patterns">
        </div>
        <div class="admin-form-group">
          <label>Instructor</label>
          <input type="text" id="newCourseInstructor" placeholder="Instructor name">
        </div>
        <div class="admin-form-row">
          <div class="admin-form-group">
            <label>Category</label>
            <select id="newCourseCategory">
              <option value="development">Development</option>
              <option value="design">Design</option>
              <option value="business">Business</option>
              <option value="data-science">Data Science</option>
              <option value="marketing">Marketing</option>
            </select>
          </div>
          <div class="admin-form-group">
            <label>Price ($)</label>
            <input type="number" id="newCoursePrice" placeholder="49.99">
          </div>
        </div>
        <div class="admin-form-group">
          <label>Description</label>
          <textarea id="newCourseDesc" rows="3" placeholder="Course description..."></textarea>
        </div>
      </div>
      <div class="admin-modal-footer">
        <button class="btn btn-secondary" onclick="hideModal('addCourseModal')">Cancel</button>
        <button class="btn btn-primary" onclick="addCourse()">Add Course</button>
      </div>
    </div>
  </div>

  <div id="toast" class="admin-toast"></div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.49.2/dist/umd/supabase.min.js" integrity="sha384-zhtfJ1S/qkpAToBl4XpbM2NH5uZgfUq2z4qo30Ed7TxgPxmkM+L1Gm94iyexzcJ6" crossorigin="anonymous"></script>
    <script src="../js/supabase-config.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/data.js"></script>
    <script src="../js/admin.js"></script>
  <script>
    const sampleCourses = [
      { id: 'C001', title: 'Advanced React Masterclass', instructor: 'Sarah Chen', category: 'development', students: 4281, rating: 4.9, revenue: 42810, status: 'published' },
      { id: 'C002', title: 'Python for Data Science', instructor: 'Marcus Lee', category: 'data-science', students: 3941, rating: 4.8, revenue: 31528, status: 'published' },
      { id: 'C003', title: 'UI/UX Design Bootcamp', instructor: 'Emily Watson', category: 'design', students: 3122, rating: 4.7, revenue: 28098, status: 'published' },
      { id: 'C004', title: 'Full-Stack JavaScript', instructor: 'John Park', category: 'development', students: 2847, rating: 4.8, revenue: 25623, status: 'published' },
      { id: 'C005', title: 'Machine Learning A-Z', instructor: 'Ana Silva', category: 'data-science', students: 2561, rating: 4.6, revenue: 23049, status: 'published' },
      { id: 'C006', title: 'Blockchain Fundamentals', instructor: 'Liam Nguyen', category: 'development', students: 0, rating: 0, revenue: 0, status: 'pending' },
      { id: 'C007', title: 'Motion Design Pro', instructor: 'Lisa Zhang', category: 'design', students: 0, rating: 0, revenue: 0, status: 'pending' },
      { id: 'C008', title: 'Digital Marketing Strategy', instructor: 'Tom Garcia', category: 'marketing', students: 1823, rating: 4.5, revenue: 14584, status: 'published' },
      { id: 'C009', title: 'Cloud Architecture', instructor: 'Dev Patel', category: 'development', students: 0, rating: 0, revenue: 0, status: 'draft' },
      { id: 'C010', title: 'Financial Modeling', instructor: 'Maria Lopez', category: 'business', students: 921, rating: 4.3, revenue: 9210, status: 'suspended' },
      { id: 'C011', title: 'Cognitive Science 101', instructor: 'Ryan Garcia', category: 'data-science', students: 0, rating: 0, revenue: 0, status: 'pending' },
      { id: 'C012', title: 'Go Lang for Backend', instructor: 'Chris Lee', category: 'development', students: 0, rating: 0, revenue: 0, status: 'draft' },
    ];

    function renderCourses(list) {
      const tbody = document.getElementById('courseTableBody');
      if (!list.length) {
        tbody.innerHTML = '<tr><td colspan="9" style="text-align:center;padding:40px;color:var(--text-tertiary);">No courses found</td></tr>';
        return;
      }
      tbody.innerHTML = list.map(c => `
        <tr>
          <td><input type="checkbox"></td>
          <td style="font-weight:500;max-width:200px;">${WiserSanitize.e(c.title)}</td>
          <td style="color:var(--text-secondary)">${WiserSanitize.e(c.instructor)}</td>
          <td><span class="badge badge-secondary" style="font-size:10px;text-transform:capitalize;">${WiserSanitize.e(c.category.replace('-',' '))}</span></td>
          <td>${c.students.toLocaleString()}</td>
          <td>${c.rating ? '<span class="wi wi-star"></span> ' + c.rating : '—'}</td>
          <td style="font-weight:600;color:#5ab82e;">$${c.revenue.toLocaleString()}</td>
          <td><span class="admin-status-pill ${c.status}">${c.status}</span></td>
          <td>
            <div class="admin-row-actions">
              <button class="admin-row-btn" onclick="viewCourse('${c.id}')" title="View"><span class="wi wi-search"></span></button>
              <button class="admin-row-btn" onclick="editCourseInline('${c.id}')" title="Edit"><span class="wi wi-pencil"></span></button>
              ${c.status === 'pending' ? `<button class="admin-row-btn" onclick="approveCourseInline('${c.id}')" title="Approve" style="color:#5ab82e;">✓</button>` : ''}
              ${c.status !== 'suspended' ? `<button class="admin-row-btn" onclick="suspendCourse('${c.id}')" title="Suspend" style="color:#EF4444;"><span class="wi wi-x"></span></button>` : `<button class="admin-row-btn" onclick="reactivateCourse('${c.id}')" title="Reactivate" style="color:#5ab82e;"><span class="wi wi-wrench"></span></button>`}
            </div>
          </td>
        </tr>
      `).join('');
    }

    function filterCourses() {
      const search = document.querySelector('.admin-search-box input').value.toLowerCase();
      const cat = document.getElementById('categoryFilter').value;
      const status = document.getElementById('statusFilter').value;
      const filtered = sampleCourses.filter(c => {
        if (search && !c.title.toLowerCase().includes(search) && !c.instructor.toLowerCase().includes(search)) return false;
        if (cat && c.category !== cat) return false;
        if (status && c.status !== status) return false;
        return true;
      });
      renderCourses(filtered);
    }

    function toggleSelectAll(el) {
      document.querySelectorAll('#courseTable tbody input[type=checkbox]').forEach(cb => cb.checked = el.checked);
    }

    function approveCourseInline(id) {
      const c = sampleCourses.find(x => x.id === id);
      if (c) { c.status = 'published'; filterCourses(); showToast(`"${c.title}" approved!`); }
    }

    function suspendCourse(id) {
      const c = sampleCourses.find(x => x.id === id);
      if (c) { c.status = 'suspended'; filterCourses(); showToast(`"${c.title}" suspended`, 'warning'); }
    }

    function reactivateCourse(id) {
      const c = sampleCourses.find(x => x.id === id);
      if (c) { c.status = 'published'; filterCourses(); showToast(`"${c.title}" reactivated!`); }
    }

    function addCourse() {
      const title = document.getElementById('newCourseTitle').value;
      const instructor = document.getElementById('newCourseInstructor').value;
      if (!title || !instructor) { showToast('Fill in all fields', 'warning'); return; }
      const cat = document.getElementById('newCourseCategory').value;
      sampleCourses.unshift({
        id: 'C' + (sampleCourses.length + 1).toString().padStart(3, '0'),
        title, instructor, category: cat,
        students: 0, rating: 0, revenue: 0, status: 'draft'
      });
      hideModal('addCourseModal');
      filterCourses();
      showToast(`"${title}" added as draft!`);
      document.getElementById('newCourseTitle').value = '';
      document.getElementById('newCourseInstructor').value = '';
    }

    renderCourses(sampleCourses);

    function viewCourse(id) {
      const c = sampleCourses.find(x => x.id === id);
      if (!c) return;
      let modal = document.getElementById('viewCourseModal');
      if (!modal) {
        modal = document.createElement('div');
        modal.id = 'viewCourseModal';
        modal.className = 'admin-modal-overlay';
        modal.addEventListener('click', e => { if (e.target === modal) modal.classList.remove('open'); });
        document.body.appendChild(modal);
      }
      modal.innerHTML = `
        <div class="admin-modal" style="max-width:500px;">
          <div class="admin-modal-header">
            <h3>Course Details</h3>
            <button class="admin-modal-close" onclick="document.getElementById('viewCourseModal').classList.remove('open')">&times;</button>
          </div>
          <div class="admin-modal-body">
            <div style="display:grid;gap:12px;">
              <div><strong style="color:var(--text-secondary);font-size:11px;text-transform:uppercase;">ID</strong><p style="font-family:monospace;">${c.id}</p></div>
              <div><strong style="color:var(--text-secondary);font-size:11px;text-transform:uppercase;">Title</strong><p style="font-weight:600;">${WiserSanitize.e(c.title)}</p></div>
              <div><strong style="color:var(--text-secondary);font-size:11px;text-transform:uppercase;">Instructor</strong><p>${WiserSanitize.e(c.instructor)}</p></div>
              <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;">
                <div style="background:var(--bg-secondary);padding:12px;border-radius:8px;text-align:center;">
                  <div style="font-size:18px;font-weight:700;color:#3d8b1c;">${c.students.toLocaleString()}</div>
                  <div style="font-size:11px;color:var(--text-tertiary);">Students</div>
                </div>
                <div style="background:var(--bg-secondary);padding:12px;border-radius:8px;text-align:center;">
                  <div style="font-size:18px;font-weight:700;color:#5ab82e;">$${c.revenue.toLocaleString()}</div>
                  <div style="font-size:11px;color:var(--text-tertiary);">Revenue</div>
                </div>
                <div style="background:var(--bg-secondary);padding:12px;border-radius:8px;text-align:center;">
                  <div style="font-size:18px;font-weight:700;color:#9fe870;"><span class="wi wi-star"></span> ${c.rating || 'N/A'}</div>
                  <div style="font-size:11px;color:var(--text-tertiary);">Rating</div>
                </div>
              </div>
              <div><strong style="color:var(--text-secondary);font-size:11px;text-transform:uppercase;">Status</strong><p><span class="admin-status-pill ${c.status}">${c.status}</span></p></div>
            </div>
          </div>
          <div class="admin-modal-footer" style="display:flex;justify-content:flex-end;gap:8px;padding:16px 24px;">
            <button class="btn btn-ghost" onclick="document.getElementById('viewCourseModal').classList.remove('open')">Close</button>
          </div>
        </div>
      `;
      modal.classList.add('open');
    }

    function editCourseInline(id) {
      const c = sampleCourses.find(x => x.id === id);
      if (!c) return;
      let modal = document.getElementById('editCourseModal');
      if (!modal) {
        modal = document.createElement('div');
        modal.id = 'editCourseModal';
        modal.className = 'admin-modal-overlay';
        modal.addEventListener('click', e => { if (e.target === modal) modal.classList.remove('open'); });
        document.body.appendChild(modal);
      }
      modal.innerHTML = `
        <div class="admin-modal" style="max-width:480px;">
          <div class="admin-modal-header">
            <h3>Edit Course</h3>
            <button class="admin-modal-close" onclick="document.getElementById('editCourseModal').classList.remove('open')">&times;</button>
          </div>
          <div class="admin-modal-body">
            <div class="admin-form-group" style="margin-bottom:12px;">
              <label style="font-size:12px;font-weight:600;display:block;margin-bottom:4px;">Title</label>
              <input type="text" id="editCTitle" value="${WiserSanitize.e(c.title)}" style="width:100%;padding:8px 12px;border:1px solid var(--border-light);border-radius:8px;">
            </div>
            <div class="admin-form-group" style="margin-bottom:12px;">
              <label style="font-size:12px;font-weight:600;display:block;margin-bottom:4px;">Instructor</label>
              <input type="text" id="editCInstructor" value="${WiserSanitize.e(c.instructor)}" style="width:100%;padding:8px 12px;border:1px solid var(--border-light);border-radius:8px;">
            </div>
            <div class="admin-form-group" style="margin-bottom:12px;">
              <label style="font-size:12px;font-weight:600;display:block;margin-bottom:4px;">Category</label>
              <select id="editCCategory" style="width:100%;padding:8px 12px;border:1px solid var(--border-light);border-radius:8px;">
                <option value="development" ${c.category==='development'?'selected':''}>Development</option>
                <option value="design" ${c.category==='design'?'selected':''}>Design</option>
                <option value="business" ${c.category==='business'?'selected':''}>Business</option>
                <option value="data-science" ${c.category==='data-science'?'selected':''}>Data Science</option>
                <option value="marketing" ${c.category==='marketing'?'selected':''}>Marketing</option>
              </select>
            </div>
            <div class="admin-form-group" style="margin-bottom:12px;">
              <label style="font-size:12px;font-weight:600;display:block;margin-bottom:4px;">Status</label>
              <select id="editCStatus" style="width:100%;padding:8px 12px;border:1px solid var(--border-light);border-radius:8px;">
                <option value="published" ${c.status==='published'?'selected':''}>Published</option>
                <option value="pending" ${c.status==='pending'?'selected':''}>Pending</option>
                <option value="draft" ${c.status==='draft'?'selected':''}>Draft</option>
                <option value="suspended" ${c.status==='suspended'?'selected':''}>Suspended</option>
              </select>
            </div>
          </div>
          <div class="admin-modal-footer" style="display:flex;justify-content:flex-end;gap:8px;padding:16px 24px;">
            <button class="btn btn-ghost" onclick="document.getElementById('editCourseModal').classList.remove('open')">Cancel</button>
            <button class="btn btn-primary" onclick="saveCourseEdit('${c.id}')">Save</button>
          </div>
        </div>
      `;
      modal.classList.add('open');
    }

    function saveCourseEdit(id) {
      const c = sampleCourses.find(x => x.id === id);
      if (!c) return;
      c.title = document.getElementById('editCTitle').value;
      c.instructor = document.getElementById('editCInstructor').value;
      c.category = document.getElementById('editCCategory').value;
      c.status = document.getElementById('editCStatus').value;
      document.getElementById('editCourseModal').classList.remove('open');
      filterCourses();
      showToast(`"${c.title}" updated!`);
    }
  </script>
<script>if(typeof ThemeManager==='undefined'){var ThemeManager={toggle:function(){var c=document.documentElement.getAttribute('data-theme')||'light';var n=c==='dark'?'light':'dark';document.documentElement.setAttribute('data-theme',n);localStorage.setItem('wiser_theme',n);document.querySelectorAll('.theme-toggle').forEach(function(b){var s=b.querySelector('.icon-sun');var m=b.querySelector('.icon-moon');if(s&&m){s.style.display=n==='dark'?'block':'none';m.style.display=n==='dark'?'none':'block'}});document.querySelectorAll('.logo-light').forEach(function(e){e.style.display=n==='dark'?'none':'block'});document.querySelectorAll('.logo-dark').forEach(function(e){e.style.display=n==='dark'?'block':'none'})}}}</script>
</body>
</html>